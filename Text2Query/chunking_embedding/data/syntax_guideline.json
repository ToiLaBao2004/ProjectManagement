[
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find Users with the word Bảo in the name",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$match": {
            "name": {
              "$regex": "Bảo",
              "$options": "i"
            }
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find all users",
    "query": {
      "collection": "users",
      "aggregate": []
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find users whose email contains 'phuchao'.",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$match": {
            "email": {
              "$regex": "phuchao"
            }
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "projects",
    "prompt": "Find out how many projects there are.",
    "query": {
      "collection": "projects",
      "aggregate": [
        {
          "$count": "total_projects"
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "projects",
    "prompt": "List current projects, excluding their IDs.",
    "query": {
      "collection": "projects",
      "aggregate": [
        {
          "$project": {
            "_id": 0,
            "name": 1,
            "description": 1,
            "owner": 1,
            "workspace": 1,
            "sprints": 1
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "tasks",
    "prompt": "Find all tasks with descriptions related to MongoDB.",
    "query": {
      "collection": "tasks",
      "aggregate": [
        {
          "$match": {
            "description": {
              "$regex": "MongoDB",
              "$options": "i"
            }
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find all users who have not been involved in any project as a member or owner of the project",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$lookup": {
            "from": "projects",
            "let": {
              "userId": "$_id"
            },
            "pipeline": [
              {
                "$match": {
                  "$expr": {
                    "$or": [
                      {
                        "$eq": [
                          "$owner",
                          "$$userId"
                        ]
                      },
                      {
                        "$in": [
                          "$$userId",
                          "$members.user"
                        ]
                      }
                    ]
                  }
                }
              }
            ],
            "as": "projectsInvolved"
          }
        },
        {
          "$match": {
            "projectsInvolved": {
              "$size": 0
            }
          }
        },
        {
          "$project": {
            "projectsInvolved": 0
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "tasks",
    "prompt": "Percentage of the total number of tasks completed in the project called First Project",
    "query": {
      "collection": "tasks",
      "aggregate": [
        {
          "$lookup": {
            "from": "projects",
            "localField": "project",
            "foreignField": "_id",
            "as": "projectInfo"
          }
        },
        {
          "$unwind": "$projectInfo"
        },
        {
          "$match": {
            "projectInfo.name": "First Project"
          }
        },
        {
          "$group": {
            "_id": null,
            "totalTasks": {
              "$sum": 1
            },
            "completedTasks": {
              "$sum": {
                "$cond": [
                  {
                    "$eq": [
                      "$completed",
                      true
                    ]
                  },
                  1,
                  0
                ]
              }
            }
          }
        },
        {
          "$project": {
            "_id": 0,
            "completionPercentage": {
              "$multiply": [
                {
                  "$divide": [
                    "$completedTasks",
                    "$totalTasks"
                  ]
                },
                100
              ]
            }
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find users whose names contain 'Pong' and return only their names and email addresses.",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$match": {
            "name": {
              "$regex": "Phương",
              "$options": "i"
            }
          }
        },
        {
          "$project": {
            "_id": 0,
            "name": 1,
            "email": 1
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Find users whose names contain the string 'Pong', excluding their password and ID.",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$match": {
            "name": {
              "$regex": "Phương"
            }
          }
        },
        {
          "$project": {
            "_id": 0,
            "password": 0
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "tasks",
    "prompt": "Get the information of the tasks by project, just title, description, priority and status.",
    "query": {
      "collection": "tasks",
      "aggregate": [
        {
          "$group": {
            "_id": "$project",
            "tasks": {
              "$push": {
                "title": "$title",
                "description": "$description",
                "priority": "$priority",
                "status": "$status"
              }
            }
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "users",
    "prompt": "Retrieve the names and emails of users who do not have any tasks assigned in the Soctrip Travel project.",
    "query": {
      "collection": "users",
      "aggregate": [
        {
          "$lookup": {
            "from": "tasks",
            "localField": "_id",
            "foreignField": "assignee",
            "as": "assignedTasks"
          }
        },
        {
          "$match": {
            "assignedTasks": {
              "$eq": []
            }
          }
        },
        {
          "$lookup": {
            "from": "tasks",
            "localField": "_id",
            "foreignField": "owner",
            "as": "ownedTasks"
          }
        },
        {
          "$match": {
            "ownedTasks": {
              "$eq": []
            }
          }
        },
        {
          "$project": {
            "name": 1,
            "email": 1
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "projects",
    "prompt": "Find users who have participated in the Soctrip Travel project.",
    "query": {
      "collection": "projects",
      "aggregate": [
        {
          "$match": {
            "name": "Soctrip Travel"
          }
        },
        {
          "$unwind": "$members"
        },
        {
          "$lookup": {
            "from": "users",
            "localField": "members.user",
            "foreignField": "_id",
            "as": "userDetails"
          }
        },
        {
          "$unwind": "$userDetails"
        },
        {
          "$project": {
            "userId": "$userDetails._id",
            "userName": "$userDetails.name",
            "userEmail": "$userDetails.email"
          }
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "tasks",
    "prompt": "How many tasks are in the Soctrip Travel project?",
    "query": {
      "collection": "tasks",
      "aggregate": [
        {
          "$lookup": {
            "from": "projects",
            "localField": "project",
            "foreignField": "_id",
            "as": "projectInfo"
          }
        },
        {
          "$unwind": "$projectInfo"
        },
        {
          "$match": {
            "projectInfo.name": "Soctrip Travel"
          }
        },
        {
          "$count": "totalTasks"
        }
      ]
    },
    "metadata": {
      "languages": "en"
    }
  },
  {
    "chunk_type": "syntax_guideline",
    "collection_name": "tasks",
    "prompt": "Find all the task deadlines grouped by project, get information about the task name, task description and project name",
    "query": {
      "collection": "tasks",
      "aggregate": [
        {
          "$match": {
            "dueDate": {
              "$lt": 